# í”„ë¡œì íŠ¸ í‰ê°€ ë¦¬í¬íŠ¸ â€” 2026.02.14

## 1. í”„ë¡œì íŠ¸ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| í”„ë¡œì íŠ¸ëª… | workflow-backend |
| ì–¸ì–´/ëŸ°íƒ€ì„ | TypeScript ^5.9.3 / Node.js (ES2022, ESM) |
| ì†ŒìŠ¤ íŒŒì¼ ìˆ˜ | 232ê°œ (.ts) |
| í…ŒìŠ¤íŠ¸ íŒŒì¼ ìˆ˜ | 39ê°œ |
| ì†ŒìŠ¤ ì½”ë“œ ë¼ì¸ | ~8,108ì¤„ |
| í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¼ì¸ | ~4,035ì¤„ |
| ì™¸ë¶€ ëŸ°íƒ€ì„ ì˜ì¡´ì„± | @anthropic-ai/claude-agent-sdk, @nestjs/common, @nestjs/core, @nestjs/platform-express, @nestjs/typeorm, class-transformer, class-validator, pg, reflect-metadata, rxjs, typeorm, uuid |
| ì•„í‚¤í…ì²˜ | Hexagonal Architecture + DDD + Vertical Slice |

**ìš”ì•½**: AI ì—ì´ì „íŠ¸ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ê´€ë¦¬ ë°±ì—”ë“œ. ì´ì „ ë¦¬í¬íŠ¸(002) ëŒ€ë¹„ ì½”ë“œ ê·œëª¨ëŠ” ì•ˆì •í™”ë˜ì—ˆìœ¼ë©°, Vertical Slice ë¦¬íŒ©í„°ë§(ê³µìœ  infra â†’ ê° featureë³„ infra ì´ë™)ì´ ì§„í–‰ ì¤‘ì´ë‹¤. ìƒˆë¡œ ë°œê²¬ëœ `@Injectable` ë°ì½”ë ˆì´í„° ìœ„ë°˜ì´ ì•„í‚¤í…ì²˜ ê·œì¹™ ì¤€ìˆ˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆë‹¤.

---

## 2. ì•„í‚¤í…ì²˜ í‰ê°€

### 2.1 Vertical Slice êµ¬ì¡°

```
src/
â”œâ”€â”€ common/           (39 files, ~1,175 lines)  â€” ê³µìœ  ID, ì´ë²¤íŠ¸, í¬íŠ¸, ì—ëŸ¬, ì¸í”„ë¼
â”œâ”€â”€ workflow/          (37 files, ~1,546 lines)  â€” ì›Œí¬í”Œë¡œìš° ì •ì˜/ê´€ë¦¬
â”œâ”€â”€ workflow-runtime/  (76 files, ~3,423 lines)  â€” ì›Œí¬í”Œë¡œìš° ì‹¤í–‰/ëŸ°íƒ€ì„
â”œâ”€â”€ git/               (24 files, ~570 lines)    â€” Git ì €ì¥ì†Œ ê´€ë¦¬
â”œâ”€â”€ mcp/               (24 files, ~567 lines)    â€” MCP ì„œë²„ ê´€ë¦¬
â”œâ”€â”€ agent/             (30 files, ~754 lines)    â€” AI ì—ì´ì „íŠ¸ ì„¸ì…˜ ê´€ë¦¬
â”œâ”€â”€ app.module.ts                                â€” NestJS ë£¨íŠ¸ ëª¨ë“ˆ
â””â”€â”€ main.ts                                      â€” ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
```

ê° ëª¨ë“ˆì€ `domain/ â†’ application/ â†’ infra/ â†’ presentation/` 4ê³„ì¸µì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ë©°, ë°°ëŸ´ íŒŒì¼(`index.ts`)ë¡œ ë ˆì´ì–´ë³„ exportë¥¼ ê´€ë¦¬í•œë‹¤.

| Feature | domain/ | application/ | infra/ | presentation/ | ìƒíƒœ |
|---------|:---:|:---:|:---:|:---:|:---:|
| workflow | âœ… | âœ… | âœ… | âœ… | ì™„ì „ |
| workflow-runtime | âœ… | âœ… | âœ… | âœ… | ì™„ì „ |
| git | âœ… | âœ… | âœ… | âœ… | ì™„ì „ |
| mcp | âœ… | âœ… | âœ… | âœ… | ì™„ì „ |
| agent | âœ… | âœ… | âœ… | âœ… | ì™„ì „ |

**í‰ê°€: A**
- 5ê°œ Bounded Contextê°€ ì™„ì „í•œ ìˆ˜ì§ ìŠ¬ë¼ì´ìŠ¤ë¡œ êµ¬ì„±
- Git ìƒíƒœë¥¼ ë³´ë©´ `common/infra/`ì— ìˆë˜ ì¼ë¶€ ì–´ëŒ‘í„°(git-reference-checker-impl, mcp-server-reader-impl ë“±)ê°€ ê° featureì˜ `infra/`ë¡œ ì´ë™ ì¤‘ì¸ ë¦¬íŒ©í„°ë§ì´ ì§„í–‰ ì¤‘
- `app.module.ts`ì—ì„œ ê° ëª¨ë“ˆì„ ì¡°í•©í•˜ëŠ” Composition Root íŒ¨í„´ ì ìš©

### 2.2 DDD ì ìš© ìˆ˜ì¤€

| DDD ê°œë… | ì ìš© ì—¬ë¶€ | ìƒì„¸ |
|-----------|:---------:|------|
| Aggregate Root | âœ… | Workflow, WorkflowRun, Git, McpServer, AgentSession, Report, WorkExecution, Checkpoint, WorkTree, WorkflowSpace â€” 10ê°œ ì—”í‹°í‹° ëª¨ë‘ `AggregateRoot<TId>` ìƒì† |
| Value Object | âœ… | Branded Type + íŒ©í† ë¦¬ íŒ¨í„´ ì¼ê´€ ì ìš© (IssueKey, GitUrl, BranchStrategy, CommitHash, SymLink ë“±) |
| Domain Event | âœ… | 23ì¢… ì´ë²¤íŠ¸ (`BaseDomainEvent` ìƒì†, `Object.freeze()` í˜ì´ë¡œë“œ, `{ë„ë©”ì¸}.{ê³¼ê±°í˜•}` ëª…ëª…) |
| Repository Port | âœ… | ëª¨ë“  Aggregateì— ìˆœìˆ˜ ì¸í„°í˜ì´ìŠ¤ ì •ì˜, ëŒ€ì‘í•˜ëŠ” Adapter êµ¬í˜„ ì™„ë¹„ |
| Bounded Context | âœ… | 5ê°œ ì»¨í…ìŠ¤íŠ¸ ëª…í™• ë¶„ë¦¬ (workflow, workflow-runtime, git, mcp, agent) |
| Invariant ë³´í˜¸ | âœ… | private ìƒì„±ì + `create()`/`fromProps()` íŒ©í† ë¦¬ + ìƒíƒœ ì „ì´ ê°€ë“œ |
| Ubiquitous Language | âœ… | ì¼ê´€ëœ ë„¤ì´ë° (ê³¼ê±°í˜• ì´ë²¤íŠ¸ëª…, Entity/VO/Port/UseCase ì ‘ë¯¸ì‚¬) |
| State Machine | âœ… | `InvalidStateTransitionError`ë¡œ ë¶ˆë²• ì „ì´ ì°¨ë‹¨ (WorkflowRun, WorkExecution, Report, AgentSession) |

**í‰ê°€: A**
- ì „ìˆ  DDD íŒ¨í„´ì„ êµê³¼ì„œì ìœ¼ë¡œ ì ìš©
- ëª¨ë“  10ê°œ Aggregate Rootê°€ private constructor / static create() / static fromProps() / getter-only ì ‘ê·¼ íŒ¨í„´ì„ ì™„ì „íˆ ì¤€ìˆ˜

### 2.3 í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜

| ëª¨ë“ˆ | Port (ë„ë©”ì¸) | In-Memory Adapter | TypeORM Adapter | Controller | Module |
|------|:---:|:---:|:---:|:---:|:---:|
| workflow | âœ… | âœ… | âœ… | âœ… | âœ… |
| workflow-runtime | âœ… (7ê°œ) | âœ… (7ê°œ) | âœ… | âœ… | âœ… |
| git | âœ… | âœ… | âœ… | âœ… | âœ… |
| mcp | âœ… | âœ… | âœ… | âœ… | âœ… |
| agent | âœ… | âœ… | âœ… | âœ… | âœ… |
| common | âœ… (ê³µìœ  í¬íŠ¸ 6ê°œ) | âœ… (EventPublisher, Query ì–´ëŒ‘í„°) | â€” | â€” | âœ… (SharedModule) |

**ê³µìœ  í¬íŠ¸ í˜„í™©** (`@common/ports/`):

| Port | ìš©ë„ | êµ¬í˜„ì²´ |
|------|------|--------|
| EventPublisher | ë„ë©”ì¸ ì´ë²¤íŠ¸ ë°œí–‰ | InMemoryEventPublisher |
| GitReferenceChecker | ì›Œí¬í”Œë¡œìš° â†’ Git ì°¸ì¡° ê²€ì¦ | GitReferenceCheckerImpl (git/infra/) |
| McpServerReferenceChecker | ì›Œí¬í”Œë¡œìš° â†’ MCP ì°¸ì¡° ê²€ì¦ | McpServerReferenceCheckerImpl (mcp/infra/) |
| WorkflowConfigReader | ëŸ°íƒ€ì„ â†’ ì›Œí¬í”Œë¡œìš° ì„¤ì • ì¡°íšŒ | WorkflowConfigReaderImpl (workflow/infra/) |
| McpServerReader | ëŸ°íƒ€ì„ â†’ MCP ì„œë²„ ì„¤ì • ì¡°íšŒ | McpServerReaderImpl (mcp/infra/) |
| AgentService / GitService | ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¶”ìƒí™” | InMemory êµ¬í˜„ì²´ |

**í‰ê°€: A-**
- Port â†’ Adapter ë¶„ë¦¬ê°€ ì™„ì „í•˜ë©° ë„ë©”ì¸ ë ˆì´ì–´ì— ì¸í”„ë¼ ì˜ì¡´ì„± ì—†ìŒ
- ê·¸ëŸ¬ë‚˜ application ë ˆì´ì–´ì— `@Injectable` NestJS ë°ì½”ë ˆì´í„°ê°€ ì‚¬ìš©ë˜ì–´ ìˆœìˆ˜ì„±ì´ í›¼ì†ë¨ (ìƒì„¸: Â§4)
- `as any` ìºìŠ¤íŒ… 1ê±´ ì¡´ì¬ (git.module.ts:17)

---

## 3. ì½”ë“œ í’ˆì§ˆ ê²€ì¦

### 3.1 TypeScript íƒ€ì… ì²´í¬

```
$ npm run typecheck
â†’ âœ… PASS (0 errors)
```

strict ëª¨ë“œì—ì„œ ì—ëŸ¬ ì—†ìŒ. **ìš°ìˆ˜.**

### 3.2 ESLint ê²€ì‚¬

```
$ npm run lint
â†’ 0 errors, 1 warning
```

| íŒŒì¼ | ë¼ì¸ | ê·œì¹™ | ë‚´ìš© |
|------|:----:|------|------|
| `src/git/presentation/git.module.ts` | 17 | `@typescript-eslint/no-explicit-any` | `InMemoryGitService as any` ìºìŠ¤íŒ… |

ì´ì „ ë¦¬í¬íŠ¸(002)ì—ì„œ 0 errors, 0 warningsì˜€ìœ¼ë‚˜, ì´ë²ˆì—ëŠ” `as any` 1ê±´ì´ ìƒˆë¡œ ë°œìƒ. ë¦¬íŒ©í„°ë§ ê³¼ì •ì—ì„œ ìœ ì…ëœ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

### 3.3 í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```
$ npm run test
â†’ âœ… 39 test files, 218 tests passed (0 failed)
   Duration: 1.40s
```

| í…ŒìŠ¤íŠ¸ ê³„ì¸µ | íŒŒì¼ ìˆ˜ | í…ŒìŠ¤íŠ¸ ìˆ˜ |
|-------------|:-------:|:---------:|
| ë‹¨ìœ„ - ë„ë©”ì¸ | 12 | 108 |
| ë‹¨ìœ„ - ì• í”Œë¦¬ì¼€ì´ì…˜ | 22 | 80 |
| ë‹¨ìœ„ - ì¸í”„ë¼ | 1 | 28 |
| í†µí•© | 3 | 5 |
| E2E | 1 | 13 |
| **í•©ê³„** | **39** | **218** |

ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼. ë„ë©”ì¸/ì• í”Œë¦¬ì¼€ì´ì…˜/ì¸í”„ë¼/í†µí•©/E2E ì „ ê³„ì¸µ í…ŒìŠ¤íŠ¸ ìœ ì§€. **ìš°ìˆ˜.**

---

## 4. ìƒì„¸ ë¬¸ì œ ë¶„ì„

### ğŸ”´ Critical â€” Application ë ˆì´ì–´ NestJS ë°ì½”ë ˆì´í„° ìœ„ë°˜

CLAUDE.md ê·œì¹™ Â§9: *"ë„ë©”ì¸/ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ì—ëŠ” NestJS ë°ì½”ë ˆì´í„°(@Injectable ë“±)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ â€” ìˆœìˆ˜ ìƒì„±ì ì£¼ì… ìœ ì§€"*

**ìœ„ë°˜ í˜„í™©**: Application ë ˆì´ì–´ 26ê°œ íŒŒì¼ì—ì„œ `@Injectable()` ë°ì½”ë ˆì´í„° ì‚¬ìš©

| ëª¨ë“ˆ | Use Cases | Event Handlers | Factory | ì†Œê³„ |
|------|:---------:|:--------------:|:-------:|:----:|
| workflow-runtime | 8 | 5 | 1 | 14 |
| workflow | 3 | 2 | â€” | 5 |
| git | 2 | â€” | â€” | 2 |
| mcp | 2 | â€” | â€” | 2 |
| agent | 3 | â€” | â€” | 3 |
| **í•©ê³„** | **18** | **7** | **1** | **26** |

**ì˜í–¥**: ë„ë©”ì¸/ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ê°€ NestJS í”„ë ˆì„ì›Œí¬ì— ê²°í•©ë˜ì–´, í”„ë ˆì„ì›Œí¬ êµì²´ ì‹œ ë³€ê²½ ë¹„ìš©ì´ ì¦ê°€í•œë‹¤. í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ì›ì¹™(ì¸í”„ë¼ ë…ë¦½ì„±)ì„ í›¼ì†í•œë‹¤.

**í•´ê²° ë°©ì•ˆ**: `@Injectable()` ì œê±° í›„, NestJS Moduleì—ì„œ `useFactory` ë˜ëŠ” ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë”ë¡œ ìˆ˜ë™ DI ì¡°ë¦½.

### ğŸŸ¡ Warning â€” `as any` íƒ€ì… ìºìŠ¤íŒ…

| íŒŒì¼ | ë¼ì¸ | ì½”ë“œ | ì›ì¸ |
|------|:----:|------|------|
| `src/git/presentation/git.module.ts` | 17 | `{ provide: GitClient, useClass: InMemoryGitService as any }` | GitClientì™€ InMemoryGitService ê°„ íƒ€ì… ë¶ˆì¼ì¹˜ |

ì´ì „ ë¦¬í¬íŠ¸(002)ì—ì„œëŠ” `as any` 0ê±´ì´ì—ˆìœ¼ë‚˜, Vertical Slice ë¦¬íŒ©í„°ë§ ì¤‘ 1ê±´ ë°œìƒ. íƒ€ì… ì •ì˜ë¥¼ ì¡°ì •í•˜ì—¬ ì œê±°í•´ì•¼ í•œë‹¤.

### ğŸŸ¡ Warning â€” Presentation ë ˆì´ì–´ ë„ë©”ì¸ ê°„ import

| íŒŒì¼ | ì°¸ì¡° ëŒ€ìƒ | ìœ í˜• |
|------|-----------|------|
| `workflow.module.ts` | `@git/presentation/git.module.js` | NestJS ëª¨ë“ˆ import |
| `workflow.module.ts` | `@mcp/presentation/mcp.module.js` | NestJS ëª¨ë“ˆ import |
| `workflow-runtime.module.ts` | `@workflow/presentation/workflow.module.js` | NestJS ëª¨ë“ˆ import |
| `workflow-runtime.module.ts` | `@mcp/presentation/mcp.module.js` | NestJS ëª¨ë“ˆ import |

NestJS Composition Rootì—ì„œ ì˜ì¡´ì„± ì¡°ë¦½ì„ ìœ„í•œ importë¡œ, domain/application ë ˆì´ì–´ì—ëŠ” ì˜í–¥ ì—†ìŒ. ë‹¨, ì´ì „ ë¦¬í¬íŠ¸(002)ì—ì„œëŠ” domain/ports ì§ì ‘ ì°¸ì¡°ë„ ìˆì—ˆìœ¼ë‚˜, ë¦¬íŒ©í„°ë§ìœ¼ë¡œ presentation ë ˆì´ì–´ì˜ Module ì°¸ì¡°ë§Œ ë‚¨ì•„ **ê°œì„ ë¨**.

### ğŸŸ¢ Info â€” í…ŒìŠ¤íŠ¸ íŒŒì¼ëª… ì»¨ë²¤ì…˜ í˜¼ì¬

í…ŒìŠ¤íŠ¸ íŒŒì¼ëª…ì´ PascalCase(18ê°œ, 46%)ì™€ kebab-case(21ê°œ, 54%)ë¡œ í˜¼ì¬. ì†ŒìŠ¤ íŒŒì¼ì€ kebab-caseë¡œ í†µì¼ë˜ì–´ ìˆìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ë„ ì¼ê´€í™”ê°€ ë°”ëŒì§í•˜ë‹¤.

### ğŸŸ¢ Info â€” ì§„í–‰ ì¤‘ì¸ ë¦¬íŒ©í„°ë§

Git ìƒíƒœì—ì„œ í™•ì¸ëœ ë³€ê²½ì‚¬í•­:
- `common/infra/`ì—ì„œ ì‚­ì œ: `git-reference-checker-impl.ts`, `mcp-server-reader-impl.ts`, `mcp-server-reference-checker-impl.ts`, `workflow-config-reader-impl.ts`
- ê° feature `infra/`ì— ì‹ ê·œ ì¶”ê°€: ë™ì¼ íŒŒì¼ë“¤

ì´ëŠ” Query Adapterë¥¼ ê³µìœ  ì˜ì—­ì—ì„œ ê° featureë¡œ ì´ë™í•˜ëŠ” ì˜¬ë°”ë¥¸ Vertical Slice ë¦¬íŒ©í„°ë§ì´ë‹¤.

---

## 5. ê°•ì 

### 5.1 ì™„ì „í•œ Vertical Slice êµ¬ì¡°

5ê°œ Bounded Context ëª¨ë‘ domain/application/infra/presentation 4ê³„ì¸µì„ ì™„ë¹„í•˜ê³ , ë°°ëŸ´ íŒŒì¼ë¡œ ë ˆì´ì–´ë³„ exportë¥¼ ê´€ë¦¬í•œë‹¤. ì§„í–‰ ì¤‘ì¸ ë¦¬íŒ©í„°ë§(Query Adapter ì´ë™)ì€ êµ¬ì¡°ë¥¼ ë”ìš± ìˆœìˆ˜í•˜ê²Œ ë§Œë“œëŠ” ë°©í–¥ì´ë‹¤.

### 5.2 êµê³¼ì„œì ì¸ DDD ì „ìˆ  íŒ¨í„´

- 10ê°œ Aggregate Rootê°€ private constructor, static create/fromProps, getter-only ì ‘ê·¼ì„ **100% ì¤€ìˆ˜**
- 23ì¢… ë„ë©”ì¸ ì´ë²¤íŠ¸ê°€ `BaseDomainEvent` ìƒì†, `Object.freeze()` ë¶ˆë³€ í˜ì´ë¡œë“œ, `{ë„ë©”ì¸}.{ê³¼ê±°í˜•}` ëª…ëª… ê·œì¹™ì„ ì¼ê´€ ì ìš©
- Branded Typeìœ¼ë¡œ ID í˜¼ìš© ì™„ì „ ì°¨ë‹¨ (`WorkflowId`, `GitId`, `McpServerId` ë“±)

### 5.3 ê²¬ê³ í•œ í…ŒìŠ¤íŠ¸ ê¸°ë°˜

- 39ê°œ íŒŒì¼, 218ê°œ í…ŒìŠ¤íŠ¸ ì „ì²´ í†µê³¼
- ë„ë©”ì¸ ë‹¨ìœ„(108) â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ìœ„(80) â†’ ì¸í”„ë¼ ë‹¨ìœ„(28) â†’ í†µí•©(5) â†’ E2E(13)ì˜ í”¼ë¼ë¯¸ë“œ êµ¬ì¡°
- í…ŒìŠ¤íŠ¸ ì½”ë“œ ~4,035ì¤„ë¡œ ì†ŒìŠ¤ ì½”ë“œ(~8,108ì¤„) ëŒ€ë¹„ ì•½ 50%ì˜ í…ŒìŠ¤íŠ¸ ë¹„ìœ¨

### 5.4 Port/Adapter ì™„ì „ ë§¤ì¹­

ëª¨ë“  Portì— ëŒ€ì‘í•˜ëŠ” In-Memory + TypeORM Adapterê°€ êµ¬í˜„ë˜ì–´ ìˆìœ¼ë©°, ê³µìœ  í¬íŠ¸ 6ê°œë¥¼ í†µí•´ ë„ë©”ì¸ ê°„ ê°„ì ‘ í†µì‹ ì´ ì²´ê³„ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.

### 5.5 ESM ì™„ì „ ì¤€ìˆ˜

ëª¨ë“  import ê²½ë¡œì— `.js` í™•ì¥ìë¥¼ ì‚¬ìš©í•˜ë©°, path alias(`@common/`, `@workflow/` ë“±)ë¥¼ ì¼ê´€ë˜ê²Œ ì ìš©í•œë‹¤.

### 5.6 ë„ë©”ì¸ ê°„ ê²°í•©ë„ ìµœì†Œí™”

domain/application ë ˆì´ì–´ì—ì„œ ë„ë©”ì¸ ê°„ ì§ì ‘ importì´ **0ê±´**ì´ë‹¤. ëª¨ë“  ìƒí˜¸ì‘ìš©ì€ `@common/events/`(23ì¢… ì´ë²¤íŠ¸)ì™€ `@common/ports/`(6ê°œ ê³µìœ  í¬íŠ¸)ë¥¼ í†µí•´ì„œë§Œ ì´ë£¨ì–´ì§„ë‹¤.

---

## 6. ì¢…í•© í‰ê°€

| ì˜ì—­ | ì ìˆ˜ | ì´ì „(002) | ë³€í™” | ë¹„ê³  |
|------|:----:|:---------:|:----:|------|
| **ì•„í‚¤í…ì²˜ ì„¤ê³„** | A | A | â†’ | Vertical Slice ë¦¬íŒ©í„°ë§ ì§„í–‰ ì¤‘, êµ¬ì¡° ìœ ì§€ |
| **ë„ë©”ì¸ ëª¨ë¸ë§** | A+ | A+ | â†’ | 10ê°œ Aggregate Root 100% íŒ¨í„´ ì¤€ìˆ˜ |
| **íƒ€ì… ì•ˆì „ì„±** | A- | A | â†“ | `as any` 0ê±´ â†’ 1ê±´ ë°œìƒ (ë¦¬íŒ©í„°ë§ ì¤‘) |
| **ì½”ë“œ í’ˆì§ˆ** | B+ | A | â†“ | `@Injectable` 26ê±´ ìœ„ë°˜ ì‹ ê·œ ë°œê²¬ |
| **í…ŒìŠ¤íŠ¸** | A | A | â†’ | 218/218 ì „ì²´ í†µê³¼ ìœ ì§€ |
| **ì™„ì„±ë„** | A- | A- | â†’ | ë¦¬íŒ©í„°ë§ ì§„í–‰ ì¤‘ì´ë‚˜ ê¸°ëŠ¥ ì™„ì „ |
| **ì½”ë“œ ì»¨ë²¤ì…˜** | B+ | A- | â†“ | í…ŒìŠ¤íŠ¸ íŒŒì¼ëª… í˜¼ì¬ + `@Injectable` ìœ„ë°˜ |

### ì¢…í•© ë“±ê¸‰: **A-**

ì´ì „ ë¦¬í¬íŠ¸(002) ëŒ€ë¹„ 0.5ë‹¨ê³„ í•˜ë½. í•µì‹¬ ì›ì¸ì€ application ë ˆì´ì–´ì—ì„œ `@Injectable` ë°ì½”ë ˆì´í„° ì‚¬ìš©ì´ ë°œê²¬ëœ ê²ƒìœ¼ë¡œ, ì´ëŠ” í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ì›ì¹™(ì¸í”„ë¼ ë…ë¦½ì„±)ì„ í›¼ì†í•œë‹¤. ê¸°ì¡´ ê°•ì (DDD íŒ¨í„´, í…ŒìŠ¤íŠ¸, Vertical Slice)ì€ ëª¨ë‘ ìœ ì§€ë˜ê³  ìˆìœ¼ë©°, ì§„í–‰ ì¤‘ì¸ ë¦¬íŒ©í„°ë§(Query Adapter ì´ë™)ì€ ì˜¬ë°”ë¥¸ ë°©í–¥ì´ë‹¤. `@Injectable` ì œê±°ì™€ `as any` í•´ì†Œê°€ ì™„ë£Œë˜ë©´ A ë“±ê¸‰ íšŒë³µì´ ì˜ˆìƒëœë‹¤.

---

## 7. ì´ì „ ë¦¬í¬íŠ¸ì™€ ë¹„êµ

| ì§€í‘œ | 002 (ì´ì „) | 003 (í˜„ì¬) | ë³€í™” |
|------|:----------:|:----------:|:----:|
| ì†ŒìŠ¤ íŒŒì¼ ìˆ˜ | 232ê°œ | 232ê°œ | ë™ì¼ |
| í…ŒìŠ¤íŠ¸ íŒŒì¼ ìˆ˜ | 39ê°œ | 39ê°œ | ë™ì¼ |
| ì†ŒìŠ¤ ì½”ë“œ ë¼ì¸ | ~8,316ì¤„ | ~8,108ì¤„ | -208 (-2.5%) |
| í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¼ì¸ | ~3,939ì¤„ | ~4,035ì¤„ | +96 (+2.4%) |
| íƒ€ì… ì²´í¬ | âœ… PASS | âœ… PASS | â€” |
| ESLint | 0 errors, 0 warnings | 0 errors, 1 warning | â†“ warning 1ê±´ |
| í…ŒìŠ¤íŠ¸ ê²°ê³¼ | 218/218 í†µê³¼ | 218/218 í†µê³¼ | â€” |
| `as any` ì‚¬ìš© | 0ê±´ | 1ê±´ | â†“ 1ê±´ ì¦ê°€ |
| ë„ë©”ì¸ ê°„ ìœ„ë°˜ (domain/app) | 0ê±´ | 0ê±´ | â€” |
| Presentation ë„ë©”ì¸ ê°„ import | 8ê±´ (infra/domain í¬í•¨) | 4ê±´ (Moduleë§Œ) | âœ… ê°œì„  |
| `@Injectable` ìœ„ë°˜ | ë¯¸ì¸¡ì • | 26ê±´ | ğŸ”´ ì‹ ê·œ ë°œê²¬ |
| ì¢…í•© ë“±ê¸‰ | **A** | **A-** | â†“ 0.5ë‹¨ê³„ |

### ì£¼ìš” ë³€í™” ë¶„ì„

**ê°œì„ ëœ í•­ëª©**:
- Presentation ë ˆì´ì–´ì—ì„œ ë‹¤ë¥¸ ë„ë©”ì¸ì˜ `infra/`ì™€ `domain/ports/` ì§ì ‘ ì°¸ì¡°ê°€ ì œê±°ë˜ì–´, NestJS Module ì°¸ì¡°ë§Œ ë‚¨ìŒ
- Query Adapter(`GitReferenceCheckerImpl`, `WorkflowConfigReaderImpl` ë“±)ê°€ `common/infra/`ì—ì„œ ê° feature `infra/`ë¡œ ì´ë™ ì¤‘ â†’ Vertical Slice ìˆœìˆ˜í™”

**ì•…í™”ëœ í•­ëª©**:
- `as any` 0ê±´ â†’ 1ê±´ (ë¦¬íŒ©í„°ë§ ì¤‘ ìœ ì…)
- ESLint 0 warnings â†’ 1 warning (ìœ„ `as any`ë¡œ ì¸í•œ)
- `@Injectable` ìœ„ë°˜ 26ê±´ ì‹ ê·œ ë°œê²¬ (ì´ì „ ë¦¬í¬íŠ¸ì—ì„œ ë¯¸ê²€ì‚¬ í•­ëª©)

**ì°¸ê³ **: `@Injectable` ìœ„ë°˜ì€ 002 ë¦¬í¬íŠ¸ì—ì„œë„ ì¡´ì¬í–ˆì„ ê²ƒì´ë‚˜ ê²€ì‚¬ í•­ëª©ì— í¬í•¨ë˜ì§€ ì•Šì•˜ë‹¤. ì´ë²ˆ ë¦¬í¬íŠ¸ì—ì„œ CLAUDE.md Â§9 ê·œì¹™ì— ê·¼ê±°í•˜ì—¬ ì²˜ìŒìœ¼ë¡œ ê²€ì¶œëœ ê²ƒì´ë‹¤.

---

## 8. ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ì‚¬í•­

### ğŸ”´ ì¦‰ì‹œ ìˆ˜ì • (P0)

1. **Application ë ˆì´ì–´ `@Injectable()` ì œê±° (26ê°œ íŒŒì¼)**
   - CLAUDE.md Â§9 ì§ì ‘ ìœ„ë°˜: "ë„ë©”ì¸/ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ì—ëŠ” NestJS ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤"
   - Use Case, Event Handler, Factoryì—ì„œ `@Injectable()` ë°ì½”ë ˆì´í„°ë¥¼ ì œê±°
   - NestJS Moduleì—ì„œ `useFactory`ë¡œ ìˆ˜ë™ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë˜ëŠ” ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë” ì‚¬ìš©
   - ì˜ˆì‹œ:
     ```typescript
     // Before (application layer)
     @Injectable()
     export class CreateWorkflowUseCase { ... }

     // After (application layer) â€” ìˆœìˆ˜ í´ë˜ìŠ¤
     export class CreateWorkflowUseCase { ... }

     // Module (presentation layer)
     {
       provide: CreateWorkflowUseCase,
       useFactory: (repo, publisher) => new CreateWorkflowUseCase(repo, publisher),
       inject: [WorkflowRepository, EventPublisher],
     }
     ```

2. **`as any` ìºìŠ¤íŒ… ì œê±° (`git.module.ts:17`)**
   - `InMemoryGitService`ê°€ `GitClient` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•˜ë„ë¡ íƒ€ì… ì •ì˜ ì¡°ì •
   - ë˜ëŠ” `useFactory`ë¡œ ë³€í™˜í•˜ì—¬ íƒ€ì… ìºìŠ¤íŒ… ë¶ˆí•„ìš”í•˜ê²Œ ìˆ˜ì •

### ğŸŸ¡ ë‹¨ê¸° ê°œì„  (P1)

3. **Vertical Slice ë¦¬íŒ©í„°ë§ ì™„ë£Œ**
   - í˜„ì¬ ì§„í–‰ ì¤‘ì¸ Query Adapter ì´ë™(common/infra â†’ feature/infra)ì„ ì™„ë£Œí•˜ê³  ì»¤ë°‹
   - `reserve.sh`, `common/infra/index.ts` ë“± ê´€ë ¨ ë³€ê²½ì‚¬í•­ë„ í•¨ê»˜ ì •ë¦¬

4. **CLAUDE.md ë¬¸ì„œ ê°±ì‹ **
   - ì´ì „ ë¦¬í¬íŠ¸ì—ì„œë„ ì§€ì ëœ ì‚¬í•­: ëŸ°íƒ€ì„ ì˜ì¡´ì„± ëª©ë¡ì´ ì‹¤ì œ `package.json`ê³¼ ë¶ˆì¼ì¹˜
   - í˜„ì¬ CLAUDE.mdì˜ ì˜ì¡´ì„± ì„¹ì…˜ì„ ì‹¤ì œ ì‚¬ìš© ì¤‘ì¸ 12ê°œ ëŸ°íƒ€ì„ ì˜ì¡´ì„±ìœ¼ë¡œ ì—…ë°ì´íŠ¸

### ğŸŸ¢ ì¤‘ê¸° ê°œì„  (P2)

5. **í…ŒìŠ¤íŠ¸ íŒŒì¼ëª… ì»¨ë²¤ì…˜ í†µì¼**
   - PascalCase(18ê°œ)ë¥¼ kebab-caseë¡œ ì¼ê´€í™” (ì†ŒìŠ¤ íŒŒì¼ ì»¨ë²¤ì…˜ê³¼ ë™ì¼)
   - ì˜ˆ: `AgentSession.test.ts` â†’ `agent-session.test.ts`

6. **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¸¡ì • ë„ì…**
   - `npm run test:coverage` ì„¤ì •ìœ¼ë¡œ ì •ëŸ‰ì  ì»¤ë²„ë¦¬ì§€ ì¶”ì 
   - ì½”ë“œ ë¼ì¸ ëŒ€ë¹„ í…ŒìŠ¤íŠ¸ ë¹„ìœ¨(~50%)ì˜ ì •í™•í•œ ë¶„ê¸° ì»¤ë²„ë¦¬ì§€ í™•ì¸

7. **CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±**
   - typecheck â†’ lint â†’ test â†’ build ìˆœì„œì˜ ìë™í™” íŒŒì´í”„ë¼ì¸
   - `@Injectable` ìœ„ë°˜ ë“± ì•„í‚¤í…ì²˜ ê·œì¹™ ìë™ ê²€ì¦ ì¶”ê°€ ê³ ë ¤
